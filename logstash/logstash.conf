input {
  beats {
  port => 5044
  }
}

filter {
  csv {
    separator => ","
    autodetect_column_names => true
#    autogenerate_column_names => true        # use only if csv file has some no titled columns
  }
}

output {
  if [@metadata][beat] == "filebeat" {
    elasticsearch {
      hosts => "elasticsearch1:9200"
      index => "csv-%{source}"
    }
  }
  else {
    elasticsearch {
      hosts => "elasticsearch1:9200"
      index => "csv_no_filebeat"
    }    
  }
}