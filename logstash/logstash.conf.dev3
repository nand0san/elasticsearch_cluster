input {
  beats {
    port => 5044
  }
}

#filtro previo al parseo csv
filter {

#  mutate {
#    gsub => [
#    'message', '\\', '',    #remove symbols
#    'message', '-', '',     #remove symbols
#    'message', '\s', ',',    #remove spaces and add comma to parsing columns
#    'message', '\n', ''    #remove endline
#    ]
#  }

  csv {
    separator => ","
    autodetect_column_names => true
    autogenerate_column_names => true        # use only if csv file has some no titled columns
    skip_header => "true"
  }

  mutate {
    gsub => ['source', '/', '']    #remove symbols
    gsub => ['source', '\\', '']   #remove symbols
    gsub => ['source', '-', '']    #remove symbols
    gsub => ['source', '\s+', '']  #remove spaces
  }

}

output {
  elasticsearch {
      hosts => "elasticsearch1:9200"
      index => "csv-%{source}"
  }
}
